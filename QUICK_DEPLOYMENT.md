# üöÄ Quick Deployment Steps - AmazKart

Follow these steps to deploy your AmazKart application to Render, Vercel, and GitHub.

## ‚è±Ô∏è Estimated Time: 30-45 minutes

---

## Phase 1: GitHub Push (5-10 minutes)

### Step 1.1: Open PowerShell

Press `Win + R` and type:
```powershell
powershell
```

### Step 1.2: Navigate to Project

```powershell
cd "c:\Users\DEVENDER SINGH\Downloads\AmazKart-main"
```

### Step 1.3: Initialize and Push to GitHub

Run this single command or execute the script:

```powershell
# Option A: Run the provided script
.\deploy-to-github.ps1

# Option B: Manual commands
git init
git add .
git commit -m "AmazKart: Full-stack e-commerce with React, Node.js, and MongoDB"
git branch -M main
git remote add origin https://github.com/Dracorav/Ecomerce-website-main.git
git push -u origin main
```

**You will be prompted for authentication:**
- **Username:** Your GitHub username
- **Password:** Your GitHub Personal Access Token (PAT)
  - Create at: https://github.com/settings/tokens
  - Click "Generate new token (classic)"
  - Check "repo" scope
  - Copy and paste the token

‚úÖ **Confirm:** Code appears on GitHub at https://github.com/Dracorav/Ecomerce-website-main

---

## Phase 2: MongoDB Setup (5-10 minutes)

### Step 2.1: Create MongoDB Atlas Account

1. Go to https://www.mongodb.com/cloud/atlas
2. Click "Sign Up Free"
3. Create account and complete verification

### Step 2.2: Create a Cluster

1. Click "Create a Deployment"
2. Select **Free** tier (M0)
3. Choose region (recommend Singapore/closest to you)
4. Create cluster (wait 5-10 minutes)

### Step 2.3: Create Database User

1. Go to "Database Access"
2. Click "Add New Database User"
   - **Username:** `admin`
   - **Password:** Create a strong password (save it!)
   - Check "Autogenerated Secure Password"
3. Click "Create Database User"

### Step 2.4: Whitelist IP

1. Go to "Network Access"
2. Click "Add IP Address"
3. Choose "Allow Access from Anywhere" (for development)
   - For production: Add specific IPs (Render's IP)
4. Click "Confirm"

### Step 2.5: Get Connection String

1. Go to your cluster page
2. Click "Connect"
3. Select "Drivers" ‚Üí "Node.js"
4. Copy the connection string
5. Replace `<password>` with your database password
6. Replace `myFirstDatabase` with `ecommerce`

**Example:**
```
mongodb+srv://admin:MyPassword123!@cluster.mongodb.net/ecommerce?retryWrites=true&w=majority
```

‚úÖ **Save this connection string for Phase 3**

---

## Phase 3: Backend Deployment to Render (10-15 minutes)

### Step 3.1: Create Render Account

1. Go to https://render.com
2. Click "Get Started"
3. Sign up with GitHub account

### Step 3.2: Create Web Service

1. Click "New +" ‚Üí "Web Service"
2. Click "Connect" next to your `Ecomerce-website-main` repository
3. Configure the service:

   ```
   Name: amazkart-backend
   Environment: Node
   Build Command: npm install && npm install --prefix server
   Start Command: npm start --prefix server
   ```

4. Scroll down to **Billing Plan** ‚Üí Select **Free**
5. Click "Create Web Service"

### Step 3.3: Add Environment Variables

While service is deploying:

1. Go to the service dashboard
2. Click "Environment" in sidebar
3. Add these variables:

   | Key | Value |
   |-----|-------|
   | `MONGODB_URI` | Your MongoDB connection string |
   | `SEED_KEY` | `my-secret-seed-key-123` |
   | `NODE_ENV` | `production` |
   | `FRONTEND_URL` | Leave blank for now (update in Phase 5) |

4. Click "Save Changes" - service will redeploy

### Step 3.4: Get Backend URL

Once deployment is complete (green checkmark):

1. Click on your service name
2. Copy the URL from the top (like `https://amazkart-backend.onrender.com`)

‚úÖ **Save this URL for Phase 4**

### Step 3.5: Test Backend

Open PowerShell and test:

```powershell
$backendUrl = "https://amazkart-backend.onrender.com"
Invoke-WebRequest -Uri "$backendUrl/api/health"
```

Should return: `{"success": true, "message": "Server is running"}`

---

## Phase 4: Frontend Deployment to Vercel (5-10 minutes)

### Step 4.1: Create Vercel Account

1. Go to https://vercel.com
2. Click "Sign Up"
3. Sign up with GitHub account

### Step 4.2: Import Project

1. Click "Add New" ‚Üí "Project"
2. Click "Import Git Repository"
3. Select `Ecomerce-website-main`
4. Configure the project:

   ```
   Project Name: amazkart-frontend
   Framework Preset: React
   Root Directory: ./client
   Build Command: npm run build
   Output Directory: build
   ```

### Step 4.3: Add Environment Variable

Before clicking "Deploy":

1. Click "Environment Variables"
2. Add variable:
   ```
   Name: REACT_APP_API_URL
   Value: https://amazkart-backend.onrender.com
   ```
   (Use the backend URL from Phase 3)

3. Click "Deploy"

### Step 4.4: Get Frontend URL

Once deployment is complete:

1. You'll see a "Congratulations!" message
2. Copy the URL (like `https://amazkart-frontend.vercel.app`)

‚úÖ **Save this URL for Phase 5**

---

## Phase 5: Final Configuration (5 minutes)

### Step 5.1: Update Backend with Frontend URL

1. Go back to Render dashboard
2. Open your `amazkart-backend` service
3. Click "Environment"
4. Update `FRONTEND_URL` with your Vercel URL:
   ```
   https://amazkart-frontend.vercel.app
   ```
5. Click "Save Changes"
6. Wait for redeploy to complete

### Step 5.2: Seed the Database

Open PowerShell and run:

```powershell
$backendUrl = "https://amazkart-backend.onrender.com"
$seedKey = "my-secret-seed-key-123"

$uri = "$backendUrl/api/seed?seedKey=$seedKey"
Invoke-WebRequest -Uri $uri -Method GET
```

Should return: `{"success": true, "message": "Database seeded successfully", "count": 20}`

### Step 5.3: Test Everything

1. Open your frontend URL: `https://amazkart-frontend.vercel.app`
2. Verify products are showing
3. Try adding products to cart
4. Check if cart persists (refresh page)

‚úÖ **Success! Your app is fully deployed!**

---

## üìä Your Deployment Summary

| Component | URL |
|-----------|-----|
| **Frontend** | https://amazkart-frontend.vercel.app |
| **Backend API** | https://amazkart-backend.onrender.com |
| **Repository** | https://github.com/Dracorav/Ecomerce-website-main |
| **Database** | MongoDB Atlas (private) |

---

## üîÑ Updating Your Deployed App

### Update Frontend Code
```powershell
# In your local project
git add .
git commit -m "Update: Your changes"
git push origin main

# Vercel auto-deploys from GitHub
# Check deployment status at https://vercel.com/dashboard
```

### Update Backend Code
```powershell
# In your local project
git add .
git commit -m "Update: Your changes"
git push origin main

# Render auto-deploys from GitHub
# Check deployment status at Render dashboard
```

### Update Environment Variables
- **Backend:** Go to Render dashboard ‚Üí Service ‚Üí Environment
- **Frontend:** Go to Vercel dashboard ‚Üí Settings ‚Üí Environment Variables

---

## ‚ö†Ô∏è Troubleshooting

### Products Not Showing
```powershell
# Re-seed the database
$backendUrl = "https://amazkart-backend.onrender.com"
Invoke-WebRequest -Uri "$backendUrl/api/seed?seedKey=my-secret-seed-key-123"
```

### Frontend Not Connecting to Backend
1. Check `REACT_APP_API_URL` in Vercel environment variables
2. Verify backend is running (check Render logs)
3. Check CORS configuration (should work by default)

### Backend Won't Deploy
1. Check build logs in Render
2. Verify all files are pushed to GitHub
3. Check `render.yaml` configuration

### Still Having Issues?
See `COMPLETE_DEPLOYMENT_GUIDE.md` for detailed troubleshooting.

---

## üéâ Next Steps

1. ‚úÖ Share your app URL with friends
2. ‚úÖ Add your own products
3. ‚úÖ Implement checkout/payment
4. ‚úÖ Add user authentication
5. ‚úÖ Set up custom domain

---

**Congratulations on deploying your application! üöÄ**
